<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh" xml:lang="zh">
<head>
<!-- 2025-01-23 四 11:38 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>从vim转移到emacs</title>
<meta name="author" content="不要在意我的头像QwQ" />
<meta name="description" content="单纯的有感而发的口水文" />
<meta name="generator" content="Org Mode" />
<script type="text/javascript" src="/theme/main.js" defer></script>
<link rel="stylesheet" type="text/css" href="/theme/main.css"/>
<link rel="shortcut icon" href="/img/icon.jpg">
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href=""> UP </a>
 |
 <a accesskey="H" href="/"> HOME </a>
</div><div id="content" class="content">
<h1 class="title">从vim转移到emacs</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#orgfe34a1b">1. 开始</a>
<ul>
<li><a href="#org943df1f">1.1. 前言</a></li>
<li><a href="#org90354b1">1.2. 原因</a></li>
<li><a href="#org112d501">1.3. 几次失败</a></li>
</ul>
</li>
<li><a href="#orgb8a38fa">2. 上手</a>
<ul>
<li><a href="#org798ae7d">2.1. 先前阶段的学习</a>
<ul>
<li><a href="#org592615c">2.1.1. 键位问题</a></li>
<li><a href="#org3f11f48">2.1.2. 插件管理</a></li>
<li><a href="#org6da404a">2.1.3. 配置</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-orgfe34a1b" class="outline-2">
<h2 id="orgfe34a1b"><span class="section-number-2">1.</span> 开始</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-org943df1f" class="outline-3">
<h3 id="org943df1f"><span class="section-number-3">1.1.</span> 前言</h3>
<div class="outline-text-3" id="text-1-1">
<p>
随手记下我是怎么从一个Vim用户转为一位Emacs用户的（实际上是脚踏两条船）
</p>

<blockquote>
<p>
<b>警告，这篇文章不是教程，只是我转变的新路历程，仅对大的方向有参考作用</b>
</p>
</blockquote>
</div>
</div>
<div id="outline-container-org90354b1" class="outline-3">
<h3 id="org90354b1"><span class="section-number-3">1.2.</span> 原因</h3>
<div class="outline-text-3" id="text-1-2">
<p>
最开始的原因是，看到别人吹emacs的org-mode有多么厉害，功能多么强大，而vim下安装插件也只是模仿了一半而已，功能残缺。出于“试一试”的心态，我就第一次安装了Emacs
</p>
</div>
</div>
<div id="outline-container-org112d501" class="outline-3">
<h3 id="org112d501"><span class="section-number-3">1.3.</span> 几次失败</h3>
<div class="outline-text-3" id="text-1-3">
<p>
既然是第一次，那么在我打开的一瞬间，我就觉得那些夸emacs好的人是不是在搞诈骗，因为它的初始的默认的界面其实异常地丑，给人一种极端复古的感觉。下面是两张Emacs终端界面和图形界面的截图（非开始界面）
</p>

<div id="orgcc070a4" class="figure">
<p><img src="./2023-01-16_01/2023-01-16_01-01.png" alt="2023-01-16_01-01.png" />
</p>
<p><span class="figure-number">Figure 1: </span>终端界面</p>
</div>


<div id="orge5be47c" class="figure">
<p><img src="./2023-01-16_01/2023-01-16_01-02.png" alt="2023-01-16_01-02.png" />
</p>
<p><span class="figure-number">Figure 2: </span>图形界面</p>
</div>

<p>
这种界面给我的第一印象就是： <b>简陋</b> 。
</p>

<p>
我很难理解为什么一个被夸赞成“神的编辑器”居然看起来是如此地简陋。我甚至一度怀疑那些界面好看的Emacs都是虚假的。就这么，我放弃了Emacs，回到了Vim的舒适区内。后来我又尝试过几次，都都没有坚持下去。僵持近一年后，就到了23年1月，我开始了最后一次尝试，也是唯一成功的一次。
</p>
</div>
</div>
</div>
<div id="outline-container-orgb8a38fa" class="outline-2">
<h2 id="orgb8a38fa"><span class="section-number-2">2.</span> 上手</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-org798ae7d" class="outline-3">
<h3 id="org798ae7d"><span class="section-number-3">2.1.</span> 先前阶段的学习</h3>
<div class="outline-text-3" id="text-2-1">
<p>
实际上，无配置的Emacs的开始界面并非如上图所示，而是有一个开始页面。在这个页面中，我看见了个字眼: <code>tutor</code> 。它是什么意思我并不清楚，但是我知道在安装Vim后会有一个命令： <code>vimtutor</code> ，我但是就判断：这很有可能是Emacs的教程，加上在图形界面Emacs是默认开启了鼠标操作的，于是我就用鼠标打开了" <i>Emacstutor</i> "，正式开启了对Emacs的学习
</p>
</div>
<div id="outline-container-org592615c" class="outline-4">
<h4 id="org592615c"><span class="section-number-4">2.1.1.</span> 键位问题</h4>
<div class="outline-text-4" id="text-2-1-1">
<p>
Emacs的这份帮助文档是中文的，这极利于我学习Emacs，而摆在所有Vim党前面的最大问题实际上是Emacs看似十分不合理的键位布局。由于没有像Vim里的“编辑模式”这种东西，所以说它的大多数快捷键都是通过“ <i>叠Buff</i> ”给叠起来的简单来说就是套娃。再通俗一点就是先按下一套快捷键，再按下另一套快捷键实现对应的功能，只有常用的快捷键不用“套娃”，如移动、复制、删除等。
</p>

<p>
但是有一个大问题，Emacs的快捷键对于Alt键和Ctrl键有着极强的依赖。对于我来说，Alt键可以很轻松地按下——只需要左手大拇指向内勾，但是Ctrl就不是省油的灯了。因为Emacs的移动就是使用C-bnpf <sup><a id="fnr.1" class="footref" href="#fn.1" role="doc-backlink">1</a></sup> 来移动的，所以说这对于小拇指的工作压力是极大的。为什么会有这种问题呢？那是因为Emacs的键位并非是按照现在的键盘设计的，所以说会有这种“逆天”的快捷键组合。
</p>

<p>
但是实际上，这个问题是有解的，解一就是让 <code>Caps Lock（大写锁定）</code> 和 <code>Ctrl</code> 两个按键调换功能，或者是直接让 <code>Caps Lock</code> 直接变成 <code>Ctrl</code> 键。但方法<sup><a id="fnr.2" class="footref" href="#fn.2" role="doc-backlink">2</a></sup>我就不在此赘述。
</p>

<p>
解二实际上现实得多，也对新手特别是Vim党特别友好——使用Evil
</p>
</div>
<ol class="org-ol">
<li><a id="org6bb8983"></a>Evil<br />
<div class="outline-text-5" id="text-2-1-1-1">
<p>
首先，我先下个定义： <b>Evil</b> 是一个Emacs的插件。不同于Vim，Emacs有一个内置的插件管理器和一个较为统一的插件仓库EPLA。它似乎又有一些其他的分支， <code>GNU MPLA</code> 是GNU Emacs的官方插件仓库，而 <code>MEPLA</code> 则是一个非官方插件仓库。不管怎样，我还是将全部的仓库放入了配置文件<sup><a id="fnr.3" class="footref" href="#fn.3" role="doc-backlink">3</a></sup>里：
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #75715E;">;; </span><span style="color: #75715E;">&#28155;&#21152;&#20179;&#24211;</span>
(<span style="color: #F92672;">require</span> '<span style="color: #AE81FF;">package</span>)
<span style="color: #75715E;">;</span><span style="color: #75715E;">(add-to-list 'package-archives '("melpa" . "https://melpa.org/packages/") t)</span>
(setq package-archives '(
  (<span style="color: #E6DB74;">"melpa"</span> . <span style="color: #E6DB74;">"http://mirrors.tuna.tsinghua.edu.cn/elpa/melpa/"</span>)
  (<span style="color: #E6DB74;">"gnu"</span> . <span style="color: #E6DB74;">"http://mirrors.tuna.tsinghua.edu.cn/elpa/gnu/"</span>)
  (<span style="color: #E6DB74;">"org"</span> . <span style="color: #E6DB74;">"http://mirrors.tuna.tsinghua.edu.cn/elpa/org/"</span>)))
(package-initialize)
</pre>
</div>
<p>
为了速度，我并不是使用其官方仓库地址，而是清华镜像。同众多的Linux发行版一样，Emacs的插件仓库是有镜像的，实际上用户也可以自己构建一个本地镜像源。不过我比较懒，不想那么做。
</p>
</div>
</li>
</ol>
</div>
<div id="outline-container-org3f11f48" class="outline-4">
<h4 id="org3f11f48"><span class="section-number-4">2.1.2.</span> 插件管理</h4>
<div class="outline-text-4" id="text-2-1-2">
<p>
在Emacs的配置文件中加入了上述配置后，就可以使用 <code>M-x</code> <code>list-packages</code> 或者是使用 <code>M-x</code> <code>package-list-packages</code> 来列出插件列表。其中的操作如下表：
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">按键</th>
<th scope="col" class="org-left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">d</td>
<td class="org-left">标记删除插件</td>
</tr>

<tr>
<td class="org-left">i</td>
<td class="org-left">标记安装插件</td>
</tr>

<tr>
<td class="org-left">U</td>
<td class="org-left">升级所有可升级的插件</td>
</tr>

<tr>
<td class="org-left">x</td>
<td class="org-left">执行标记的操作</td>
</tr>

<tr>
<td class="org-left">q</td>
<td class="org-left">退出插件列表</td>
</tr>
</tbody>
</table>
<p>
这样，我们就可以用它来方便地安装插件了。下面再介绍一种再配置文件中安装并配置插件的办法：使用 <code>use-package</code>
</p>
</div>
<ol class="org-ol">
<li><a id="org71c95ff"></a>use-package<br />
<div class="outline-text-5" id="text-2-1-2-1">
<p>
想要使用它，你需要先手动安装use-package插件，
并在配置文件中加入：
</p>
<div class="org-src-container">
<pre class="src src-lisp">(eval-when-compile (<span style="color: #F92672;">require</span> '<span style="color: #AE81FF;">use-package</span>))
</pre>
</div>
<p>
意思就是加载use-package插件，然后你就可以使用一个“宏”来管理插件：
</p>
<div class="org-src-container">
<pre class="src src-lisp">(use-package foo
  <span style="color: #F92672;">:ensure</span> t                  <span style="color: #75715E;">;; </span><span style="color: #75715E;">&#30830;&#35748;&#25554;&#20214;&#23384;&#22312;&#65288;&#19981;&#23384;&#22312;&#21017;&#33258;&#21160;&#23433;&#35013;&#65289;</span>
  <span style="color: #F92672;">:init</span> (function)           <span style="color: #75715E;">;; </span><span style="color: #75715E;">&#21021;&#22987;&#21270;&#30340;&#35774;&#32622;&#65292;&#19968;&#33324;&#26159;&#21551;&#21160;&#26576;&#20010;&#20989;&#25968;</span>
  <span style="color: #F92672;">:config</span> (function)         <span style="color: #75715E;">;; </span><span style="color: #75715E;">&#37197;&#32622;&#26041;&#38754;&#65292;&#23450;&#20041;&#21151;&#33021;&#65292;&#35774;&#32622;&#21464;&#37327;</span>
  <span style="color: #F92672;">:hook</span> (hook . function))   <span style="color: #75715E;">;; </span><span style="color: #75715E;">&#23450;&#20041;hook&#65292;&#38024;&#23545;&#29305;&#23450;major mode&#30340;&#35774;&#32622;</span>
</pre>
</div>
<p>
它的作用通常是在安装了插件后进行相应的配置，利用这一特性，也可以通过它来让你的配置更加“ <i>模块化</i> ”
</p>
</div>
</li>
</ol>
</div>
<div id="outline-container-org6da404a" class="outline-4">
<h4 id="org6da404a"><span class="section-number-4">2.1.3.</span> 配置</h4>
<div class="outline-text-4" id="text-2-1-3">
<p>
这一方面我的做法是根据自己的需求（大都是想复现我在Vim配置好的功能），上网搜相应的资料抄作业。但是不知为什么，我在网上搜索到的资料比较少且大都比较杂乱，令我费解，就算是抄下来也总是出现各种莫名其妙的报错。
</p>

<p>
实际上我看过这么一篇文章<sup><a id="fnr.4" class="footref" href="#fn.4" role="doc-backlink">4</a></sup>，里面有一个观点： <b>站在巨人的肩膀上</b> ，意为新手要先把大牛的配置抄下来学习，不要尝试自己从头建立一份配置。我并不反对这一观点，并且我还尝试了他推荐的<a href="https://github.com/purcell/emacs.d">purcell的Emacs配置</a>。确实，相对于我自己的配置来说（也许）更快，但我觉得有一些缺点是没有办法弥补的。别人的配置总有一些是我不需要的，也会缺少一些我需要的功能，而自己胡乱去加，又有可能引发奇怪的bug。所以说我也只是把这些配置当成抄作业的对象，但不是首要的。毕竟我不想一遍遍去看完它的所有文件。
</p>
</div>
</div>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1" role="doc-backlink">1</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
即Ctrl-b（向左）、Ctrl-n（向下）、Ctrl-p（向上）、Ctrl-f（向左）
</p>

<p class="footpara">
在Emacs中（其实这套方案大都通用）， <code>Key-key</code> 通常表示要从左到右同时按下的按键，而 <code>Key key</code> 则是先按下 <code>Key</code> 后再按下 <code>key</code> 的快捷键组合
</p></div></div>

<div class="footdef"><sup><a id="fn.2" class="footnum" href="#fnr.2" role="doc-backlink">2</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
这里仅补充Linux如何设置按键映射。
</p>

<p class="footpara">
在X环境下请参考<a href="https://wiki.archlinux.org/title/Xorg/Keyboard_configuration#Using_setxkbmap">这篇ArchWiki学习使用setxkbmap</a>并参考<a href="https://wiki.archlinux.org/title/Xorg/Keyboard_configuration#Swapping_Caps_Lock_with_Left_Control">其中的这段文字学习查看相关选项</a>。这里给出相关命令及其结果
</p>
<div class="org-src-container">
<pre class="src src-shell"><span style="color: #75715E;"># </span><span style="color: #75715E;">&#26597;&#35810;&#30456;&#20851;&#36873;&#39033;</span>
$ grep -e <span style="color: #E6DB74;">"ctrl:\|:ctrl"</span> /usr/share/X11/xkb/rules/evdev.lst
  grp:ctrl_select      Left Ctrl to first layout; Right Ctrl to second layout
  grp:ctrls_toggle     Both Ctrls together
  grp:ctrl_shift_toggle Ctrl+Shift
  grp:ctrl_alt_toggle  Alt+Ctrl
  grp:ctrl_space_toggle Ctrl+Space
  ctrl:nocaps          Caps Lock as Ctrl
  ctrl:lctrl_meta      Left Ctrl as Meta
  ctrl:swapcaps        Swap Ctrl and Caps Lock
  ctrl:hyper_capscontrol Caps Lock as Ctrl, Ctrl as Hyper
  ctrl:ac_ctrl         To the left of <span style="color: #E6DB74;">"A"</span>
  ctrl:aa_ctrl         At the bottom left
  ctrl:rctrl_ralt      Right Ctrl as Right Alt
  ctrl:menu_rctrl      Menu as Right Ctrl
  ctrl:swap_lalt_lctl  Swap Left Alt with Left Ctrl
  ctrl:swap_lwin_lctl  Swap Left Win with Left Ctrl
  ctrl:swap_rwin_rctl  Swap Right Win with Right Ctrl
  ctrl:swap_lalt_lctl_lwin Left Alt as Ctrl, Left Ctrl as Win, Left Win as Left Alt
  caps:ctrl_modifier   Make Caps Lock an additional Ctrl
  altwin:ctrl_win      Ctrl is mapped to Win and the usual Ctrl
  altwin:ctrl_rwin     Ctrl is mapped to Right Win and the usual Ctrl
  altwin:ctrl_alt_win  Ctrl is mapped to Alt, Alt to Win
  terminate:ctrl_alt_bksp Ctrl+Alt+Backspace
<span style="color: #75715E;"># </span><span style="color: #75715E;">&#35774;&#32622;&#36873;&#39033;&#65292;&#36825;&#26159;&#35753;Caps Lock&#26144;&#23556;&#21040;Ctrl Left</span>
$ setxkbmap -option <span style="color: #E6DB74;">'caps:ctrl_modifier'</span>
<span style="color: #75715E;"># </span><span style="color: #75715E;">&#36825;&#26159;&#35753;Caps Lock&#21644;Ctrl Left&#20114;&#25442;</span>
$ setxkbmap -option <span style="color: #E6DB74;">'swapcaps'</span>
</pre>
</div>

<p class="footpara">
若是在无图形界面环境下，请参考<a href="https://wiki.archlinux.org/title/Linux_console/Keyboard_configuration">这篇ArchWiki学习配置</a>，其中<a href="https://wiki.archlinux.org/title/Linux_console/Keyboard_configuration#Other_examples">这段</a>是交换按键的具体例子。这里再附上<a href="https://wiki.archlinuxcn.org/wiki/Linux_%E6%8E%A7%E5%88%B6%E5%8F%B0/%E9%94%AE%E7%9B%98%E9%85%8D%E7%BD%AE">中文版本连接</a>和<a href="https://wiki.archlinuxcn.org/wiki/Linux_%E6%8E%A7%E5%88%B6%E5%8F%B0/%E9%94%AE%E7%9B%98%E9%85%8D%E7%BD%AE#%E5%85%B6%E4%BB%96%E4%BE%8B%E5%AD%90Other_examples">片段连接</a>。希望能有帮助。
</p></div></div>

<div class="footdef"><sup><a id="fn.3" class="footnum" href="#fnr.3" role="doc-backlink">3</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
我的配置文件<a href="https://github.com/youlanjie/emacs.d/">链接</a>，虽然比较烂，但可以用作参考。
</p></div></div>

<div class="footdef"><sup><a id="fn.4" class="footnum" href="#fnr.4" role="doc-backlink">4</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
这两个链接的文章是相同的，这里只是提供两个入口
<a href="https://github.com/redguardtoo/mastering-emacs-in-one-year-guide">在Github的文章</a>
<a href="https://blog.csdn.net/redguardtoo/article/details/7222501">在CSDN的文章</a>
</p></div></div>


</div>
</div></div>
<div id="postamble" class="status">
<p class="date">Date: 2023-01-16 12:30</p>
<p class="author">Author: 不要在意我的头像QwQ</p>
<p class="date">Created: 2025-01-23 四 11:38</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
