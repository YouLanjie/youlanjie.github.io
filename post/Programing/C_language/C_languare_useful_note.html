<!DOCTYPE html>
<html lang="zh">
<head>
<meta name="author" content="不要在意我的头像QwQ" />
<meta name="description" content="抄别人blog的东西，塞一起应该方便自己查吧？" />
<meta charset="utf-8" />
<title>C语言速查笔记</title>
<script type="text/javascript" src="/theme/main.js" defer></script>
<link rel="stylesheet" type="text/css" href="/theme/main.css"/>
<link rel="shortcut icon" href="/img/icon.jpg">
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href="#"> UP </a>
 |
 <a accesskey="H" href="/"> HOME </a>
</div>
<div id="content" class="content">
<h1 class="title">C语言速查笔记</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul><li><a href="#org-title-1">1. 前言</a></li><li><a href="#org-title-2">2. 使用ANSI转义字符为打印的字符上色</a><ul><li><a href="#org-title-2-1">2.1. 颜色</a><ul><li><a href="#org-title-2-1-1">2.1.1. 使用普通颜色（非256色）</a></li><li><a href="#org-title-2-1-2">2.1.2. 使用真彩色（256色）</a></li></ul></li>
<li><a href="#org-title-2-2">2.2. 文字效果</a></li><li><a href="#org-title-2-3">2.3. 其他类型</a><ul><li><a href="#org-title-2-3-1">2.3.1. 光标移动</a></li><li><a href="#org-title-2-3-2">2.3.2. 光标显示</a></li><li><a href="#org-title-2-3-3">2.3.3. 光标位置</a></li></ul></li></ul></li>
<li><a href="#org-title-3">3. Linux Signal信号</a></li><li><a href="#org-title-4">4. RELRO等安全选项</a></li><li><a href="#org-title-5">5. 判断字符是中文还是英文(有局限)</a></li><li><a href="#org-title-6">6. 生成迷宫</a></li></ul></div></div>
<div class="outline-2">
<h2 id="org-title-1"><span class="section-number-2">1.</span> 前言</h2><div class="outline-text-2" id="text-1"><p>这玩意还是我自己吃菌子吃多了头脑发热写的东西，不过他应该不会像隔壁“某教程”那样写着写着就弃坑变成了烂尾楼</p><p>当然，真正的理由还是翻自己的收藏夹发现收藏了一堆网页，但一大堆都是CSDN的shit，想着能不能把他们从收藏夹里面“优化”掉，所以就想抄到自己这里来hhh</p><p>以下内容或许可以参考
<a href="https://gitee.com/YouLanjie/my-test">这个仓库</a>的C语言部分，我有些实例代码是写在里面的</p></div></div><div class="outline-2">
<h2 id="org-title-2"><span class="section-number-2">2.</span> 使用ANSI转义字符为打印的字符上色</h2><div class="outline-text-2" id="text-2"><p>特殊效果的支持源自ANSI标准，由于我不是很懂所以不多赘述。这里重点关注我们应该如何使用它。</p><p>先说结论：<br/> 要使用特殊效果，通常需要使用任意输出函数输出以 <code>\033[数字选项+字符选项</code> 为格式的字符串。</p><p>其中，字符选项相当于指定了其大概的类型，只可以单独使用，并作为一串控制字符串的结束。而数字选项则是细分了其具体功能，且可以复用，只需要使用分号将其隔开。</p><p>例子请续看下文。</p></div><div class="outline-3">
<h3 id="org-title-2-1"><span class="section-number-3">2.1.</span> 颜色</h3><div class="outline-text-3" id="text-2-1"><blockquote>
<p>做出一些提醒，该子标题内的内容都需要一个关键的字符 <code>m</code> ，所有的文字效果都是基于 <code>\033[XXm</code> 的格式，只是为了方便理解，在大部分内容都不作为重点讲述。</p></blockquote></div><div class="outline-4">
<h4 id="org-title-2-1-1"><span class="section-number-4">2.1.1.</span> 使用普通颜色（非256色）</h4><div class="outline-text-4" id="text-2-1-1"><p>要打印出普通的颜色，只需要使用下面的程序：</p><div class="org-src-container"><pre class="src src-c"><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">color_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">31</span><span class="p">;</span><span class="w">    </span><span class="cm">/* 这里使用变量不是必须的，只是为了更容易看懂，实际上需要打印出对应的数字即可 */</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\033</span><span class="s">[%dm&quot;</span>
<span class="w">               </span><span class="s">&quot;在这里放你想要带特殊效果打印的东西</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
<span class="w">               </span><span class="n">color_code</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div><p>下面是所有关于颜色控制的数字表格，左侧是字体颜色，右侧是背景颜色。</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides"><colgroup><col class="org-left" />
<col class="org-left" />
<col class="org-left" />
<col class="org-left" /></colgroup><thead><tr><th scope="col" class="org-left">数字</th><th scope="col" class="org-left">字体颜色</th><th scope="col" class="org-left">数字</th><th scope="col" class="org-left">背景颜色</th></tr>
</thead><tbody>
<tr><td class="org-left">30</td><td class="org-left">黑色</td><td class="org-left">40</td><td class="org-left">默认/无色</td></tr><tr><td class="org-left">31</td><td class="org-left">红色</td><td class="org-left">41</td><td class="org-left">红色</td></tr><tr><td class="org-left">32</td><td class="org-left">绿色</td><td class="org-left">42</td><td class="org-left">绿色</td></tr><tr><td class="org-left">33</td><td class="org-left">黄色/橙色</td><td class="org-left">43</td><td class="org-left">黄色/橙色</td></tr><tr><td class="org-left">34</td><td class="org-left">蓝色</td><td class="org-left">44</td><td class="org-left">蓝色</td></tr><tr><td class="org-left">35</td><td class="org-left">紫色</td><td class="org-left">45</td><td class="org-left">紫色</td></tr><tr><td class="org-left">36</td><td class="org-left">青色</td><td class="org-left">46</td><td class="org-left">青色</td></tr><tr><td class="org-left">37</td><td class="org-left">白色</td><td class="org-left">47</td><td class="org-left">白色</td></tr></table><blockquote>
<p>顺带一提，这些控制代码是“可堆叠的”，意思就是不通的颜色代码可以使用分号 <code>;</code> 隔断开来，这样就不必打上好几个 <code>\033[...</code> 让代码变得难以阅读。这里再举一个例子做示范。</p><div class="org-src-container"><pre class="src src-c"><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">color_code_bg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">44</span><span class="p">,</span><span class="w">    </span><span class="cm">/* 蓝色背景 */</span>
<span class="w">            </span><span class="n">color_code_fg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">31</span><span class="p">;</span><span class="w">    </span><span class="cm">/* 红色字体 */</span>
<span class="w">        </span><span class="cm">/* 这里的转义相当于 \033[44;31m */</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\033</span><span class="s">[%d;%dm&quot;</span>
<span class="w">               </span><span class="s">&quot;Put someting here you want to print.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
<span class="w">               </span><span class="n">color_code_bg</span><span class="p">,</span><span class="w"> </span><span class="n">color_code_fg</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div></blockquote></div></div><div class="outline-4">
<h4 id="org-title-2-1-2"><span class="section-number-4">2.1.2.</span> 使用真彩色（256色）</h4><div class="outline-text-4" id="text-2-1-2"><p>在这种情况下，我们可以打印出256种颜色，比普通颜色高级多了。不过我也还是不知道Vim 和Emacs这些编辑器使用主题时是怎样打印任意颜色的。毕竟我取过色，发现我使用的主题有很多都不在256色的范围内，所以说挺令我困惑的。</p><p>废话少说，先上代码示范。</p><div class="org-src-container"><pre class="src src-c"><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">color_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">        </span><span class="cm">/* 在这里将各段控制字符分开是为了方便理解，不是必须的 */</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">color_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">color_code</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">256</span><span class="p">;</span><span class="w"> </span><span class="n">color_code</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">color_code</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">16</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">color_code</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">16</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">                </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\033</span><span class="s">[&quot;</span>
<span class="w">                       </span><span class="s">&quot;48;&quot;</span>
<span class="w">                       </span><span class="s">&quot;5;&quot;</span>
<span class="w">                       </span><span class="s">&quot;%dm&quot;</span>
<span class="w">                       </span><span class="s">&quot;%03d&quot;</span>
<span class="w">                       </span><span class="s">&quot;</span><span class="se">\033</span><span class="s">[0m &quot;</span><span class="p">,</span>
<span class="w">                       </span><span class="n">color_code</span><span class="p">,</span><span class="w"> </span><span class="n">color_code</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div><p>下面开始讲解。</p><p>要想使用256色的输出，你需要的是 <code>48;5;%dm</code> 这样一串控制符。其中的 <code>48;5;</code> 就是关键。</p><p>在这里 <code>48</code> 的意思实际上应该是告诉颜色的类型是背景颜色，如果想要设置字体的颜色，只需要将其替换成 <code>38</code> 即可。</p><p>接下来的 <code>5</code> 我就不清楚具体的作用了。我只提上一点：如果单独使用它，那么它所对应的效果实际上是 <b>字体闪烁</b> 。</p></div></div></div><div class="outline-3">
<h3 id="org-title-2-2"><span class="section-number-3">2.2.</span> 文字效果</h3><div class="outline-text-3" id="text-2-2"><p>如果你观察仔细，就应该会发现刚刚的代码里面有一些新的控制符，例如刚刚提到的 <code>\033[5m;</code> 也有 <code>\033[0m</code> 。现在，是时候列出一个效果列表了。</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides"><colgroup><col class="org-left" />
<col class="org-left" /></colgroup><thead><tr><th scope="col" class="org-left">控制符</th><th scope="col" class="org-left">效果</th></tr>
</thead><tbody>
<tr><td class="org-left">0</td><td class="org-left">清除所有文字效果</td></tr><tr><td class="org-left">1</td><td class="org-left">加粗文字</td></tr><tr><td class="org-left">2</td><td class="org-left">细化文字</td></tr><tr><td class="org-left">3</td><td class="org-left">斜体</td></tr><tr><td class="org-left">4</td><td class="org-left">下划线</td></tr><tr><td class="org-left">5</td><td class="org-left">闪烁</td></tr><tr><td class="org-left">6</td><td class="org-left">未知</td></tr><tr><td class="org-left">7</td><td class="org-left">颜色反转（字体和背景颜色互换）</td></tr><tr><td class="org-left">8</td><td class="org-left">隐藏字体（或许可以尝试做一些彩蛋？）</td></tr></table></div></div><div class="outline-3">
<h3 id="org-title-2-3"><span class="section-number-3">2.3.</span> 其他类型</h3><div class="outline-4">
<h4 id="org-title-2-3-1"><span class="section-number-4">2.3.1.</span> 光标移动</h4><div class="outline-text-4" id="text-2-3-1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides"><colgroup><col class="org-left" />
<col class="org-left" /></colgroup><thead><tr><th scope="col" class="org-left">空字符</th><th scope="col" class="org-left">效果</th></tr>
</thead><tbody>
<tr><td class="org-left">D</td><td class="org-left">左</td></tr><tr><td class="org-left">C</td><td class="org-left">右</td></tr><tr><td class="org-left">A</td><td class="org-left">上</td></tr><tr><td class="org-left">B</td><td class="org-left">下</td></tr></table><p>这种情况下，数字参数用于指定步数</p></div></div><div class="outline-4">
<h4 id="org-title-2-3-2"><span class="section-number-4">2.3.2.</span> 光标显示</h4><div class="outline-text-4" id="text-2-3-2"><p>隐藏光标： <code>\033[?25l</code></p><p>显示光标： <code>\033[?25h</code></p></div></div><div class="outline-4">
<h4 id="org-title-2-3-3"><span class="section-number-4">2.3.3.</span> 光标位置</h4><div class="outline-text-4" id="text-2-3-3"><p>保存： <code>\033[u</code></p><p>还原： <code>\033[l</code></p></div></div></div></div><div class="outline-2">
<h2 id="org-title-3"><span class="section-number-2">3.</span> Linux Signal信号</h2><div class="outline-text-2" id="text-3"><p><a href="https://www.cnblogs.com/frisk/p/11602973.html">来源</a></p><div class="org-src-container"><pre class="src src-c"><span class="n">SIGHUP</span><span class="w">       </span><span class="mi">1</span><span class="w">          </span><span class="cm">/* Hangup (POSIX).  */</span><span class="w">                          </span><span class="n">终止进程</span><span class="w">     </span><span class="n">终端线路挂断</span>
<span class="n">SIGINT</span><span class="w">       </span><span class="mi">2</span><span class="w">       </span><span class="cm">/* Interrupt (ANSI).  */</span><span class="w">                        </span><span class="n">终止进程</span><span class="w">     </span><span class="n">中断进程</span><span class="w"> </span><span class="n">Ctrl</span><span class="o">+</span><span class="n">C</span>
<span class="n">SIGQUIT</span><span class="w">      </span><span class="mi">3</span><span class="w">          </span><span class="cm">/* Quit (POSIX).  */</span><span class="w">                            </span><span class="n">建立CORE文件终止进程</span><span class="err">，</span><span class="n">并且生成core文件</span><span class="w"> </span><span class="n">Ctrl</span><span class="o">+</span>\
<span class="n">SIGILL</span><span class="w">       </span><span class="mi">4</span><span class="w">          </span><span class="cm">/* Illegal instruction (ANSI).  */</span><span class="w">              </span><span class="n">建立CORE文件</span><span class="p">,</span><span class="n">非法指令</span>
<span class="n">SIGTRAP</span><span class="w">      </span><span class="mi">5</span><span class="w">          </span><span class="cm">/* Trace trap (POSIX).  */</span><span class="w">                      </span><span class="n">建立CORE文件</span><span class="p">,</span><span class="n">跟踪自陷</span>
<span class="n">SIGABRT</span><span class="w">      </span><span class="mi">6</span><span class="w">          </span><span class="cm">/* Abort (ANSI).  */</span>
<span class="n">SIGIOT</span><span class="w">       </span><span class="mi">6</span><span class="w">          </span><span class="cm">/* IOT trap (4.2 BSD).  */</span><span class="w">                      </span><span class="n">建立CORE文件</span><span class="p">,</span><span class="n">执行I</span><span class="o">/</span><span class="n">O自陷</span>
<span class="n">SIGBUS</span><span class="w">       </span><span class="mi">7</span><span class="w">          </span><span class="cm">/* BUS error (4.2 BSD).  */</span><span class="w">                     </span><span class="n">建立CORE文件</span><span class="p">,</span><span class="n">总线错误</span>
<span class="n">SIGFPE</span><span class="w">       </span><span class="mi">8</span><span class="w">          </span><span class="cm">/* Floating-point exception (ANSI).  */</span><span class="w">         </span><span class="n">建立CORE文件</span><span class="p">,</span><span class="n">浮点异常</span>
<span class="n">SIGKILL</span><span class="w">      </span><span class="mi">9</span><span class="w">        </span><span class="cm">/* Kill, unblockable (POSIX).  */</span><span class="w">               </span><span class="n">终止进程</span><span class="w">     </span><span class="n">杀死进程</span>
<span class="n">SIGUSR1</span><span class="w">      </span><span class="mi">10</span><span class="w">         </span><span class="cm">/* User-defined signal 1 (POSIX).  */</span><span class="w">           </span><span class="n">终止进程</span><span class="w">     </span><span class="n">用户定义信号1</span>
<span class="n">SIGSEGV</span><span class="w">      </span><span class="mi">11</span><span class="w">         </span><span class="cm">/* Segmentation violation (ANSI).  */</span><span class="w">           </span><span class="n">建立CORE文件</span><span class="p">,</span><span class="n">段非法错误</span>
<span class="n">SIGUSR2</span><span class="w">      </span><span class="mi">12</span><span class="w">         </span><span class="cm">/* User-defined signal 2 (POSIX).  */</span><span class="w">           </span><span class="n">终止进程</span><span class="w">     </span><span class="n">用户定义信号2</span>
<span class="n">SIGPIPE</span><span class="w">      </span><span class="mi">13</span><span class="w">         </span><span class="cm">/* Broken pipe (POSIX).  */</span><span class="w">                     </span><span class="n">终止进程</span><span class="w">     </span><span class="n">向一个没有读进程的管道写数据</span>
<span class="n">SIGALARM</span><span class="w">     </span><span class="mi">14</span><span class="w">       </span><span class="cm">/* Alarm clock (POSIX).  */</span><span class="w">                     </span><span class="n">终止进程</span><span class="w">     </span><span class="n">计时器到时</span>
<span class="n">SIGTERM</span><span class="w">      </span><span class="mi">15</span><span class="w">       </span><span class="cm">/* Termination (ANSI).  */</span><span class="w">                      </span><span class="n">终止进程</span><span class="w">     </span><span class="n">软件终止信号</span>
<span class="n">SIGSTKFLT</span><span class="w">    </span><span class="mi">16</span><span class="w">         </span><span class="cm">/* Stack fault.  */</span>
<span class="n">SIGCLD</span><span class="w">       </span><span class="n">SIGCHLD</span><span class="w">    </span><span class="cm">/* Same as SIGCHLD (System V).  */</span>
<span class="n">SIGCHLD</span><span class="w">      </span><span class="mi">17</span><span class="w">         </span><span class="cm">/* Child status has changed (POSIX).  */</span><span class="w">        </span><span class="n">忽略信号</span><span class="w">     </span><span class="n">当子进程停止或退出时通知父进程</span>
<span class="n">SIGCONT</span><span class="w">      </span><span class="mi">18</span><span class="w">         </span><span class="cm">/* Continue (POSIX).  */</span><span class="w">                        </span><span class="n">忽略信号</span><span class="w">     </span><span class="n">继续执行一个停止的进程</span>
<span class="n">SIGSTOP</span><span class="w">      </span><span class="mi">19</span><span class="w">         </span><span class="cm">/* Stop, unblockable (POSIX).  */</span><span class="w">               </span><span class="n">停止进程</span><span class="w">     </span><span class="n">非终端来的停止信号</span>
<span class="n">SIGTSTP</span><span class="w">      </span><span class="mi">20</span><span class="w">         </span><span class="cm">/* Keyboard stop (POSIX).  */</span><span class="w">                   </span><span class="n">停止进程</span><span class="w">     </span><span class="n">终端来的停止信号</span><span class="w"> </span><span class="n">Ctrl</span><span class="o">+</span><span class="n">Z</span>
<span class="n">SIGTTIN</span><span class="w">      </span><span class="mi">21</span><span class="w">         </span><span class="cm">/* Background read from tty (POSIX).  */</span><span class="w">        </span><span class="n">停止进程</span><span class="w">     </span><span class="n">后台进程读终端</span>
<span class="n">SIGTTOU</span><span class="w">      </span><span class="mi">22</span><span class="w">         </span><span class="cm">/* Background write to tty (POSIX).  */</span><span class="w">         </span><span class="n">停止进程</span><span class="w">     </span><span class="n">后台进程写终端</span>
<span class="n">SIGURG</span><span class="w">       </span><span class="mi">23</span><span class="w">         </span><span class="cm">/* Urgent condition on socket (4.2 BSD).  */</span><span class="w">    </span><span class="n">忽略信号</span><span class="w">     </span><span class="n">I</span><span class="o">/</span><span class="n">O紧急信号</span>
<span class="n">SIGXCPU</span><span class="w">      </span><span class="mi">24</span><span class="w">         </span><span class="cm">/* CPU limit exceeded (4.2 BSD).  */</span><span class="w">            </span><span class="n">终止进程</span><span class="w">     </span><span class="n">CPU时限超时</span>
<span class="n">SIGXFSZ</span><span class="w">      </span><span class="mi">25</span><span class="w">         </span><span class="cm">/* File size limit exceeded (4.2 BSD).  */</span><span class="w">      </span><span class="n">终止进程</span><span class="w">     </span><span class="n">文件长度过长</span>
<span class="n">SIGVTALRM</span><span class="w">    </span><span class="mi">26</span><span class="w">         </span><span class="cm">/* Virtual alarm clock (4.2 BSD).  */</span><span class="w">           </span><span class="n">终止进程</span><span class="w">     </span><span class="n">虚拟计时器到时</span>
<span class="n">SIGPROF</span><span class="w">      </span><span class="mi">27</span><span class="w">         </span><span class="cm">/* Profiling alarm clock (4.2 BSD).  */</span><span class="w">         </span><span class="n">终止进程</span><span class="w">     </span><span class="n">统计分布图用计时器到时</span>
<span class="n">SIGWINCH</span><span class="w">     </span><span class="mi">28</span><span class="w">         </span><span class="cm">/* Window size change (4.3 BSD, Sun).  */</span><span class="w">       </span><span class="n">忽略信号</span><span class="w">     </span><span class="n">窗口大小发生变化</span>
<span class="n">SIGPOLL</span><span class="w">      </span><span class="n">SIGIO</span><span class="w">      </span><span class="cm">/* Pollable event occurred (System V).  */</span>
<span class="n">SIGIO</span><span class="w">        </span><span class="mi">29</span><span class="w">         </span><span class="cm">/* I/O now possible (4.2 BSD).  */</span><span class="w">              </span><span class="n">忽略信号</span><span class="w">     </span><span class="n">描述符上可以进行I</span><span class="o">/</span><span class="n">O</span>
<span class="n">SIGPWR</span><span class="w">       </span><span class="mi">30</span><span class="w">         </span><span class="cm">/* Power failure restart (System V).  */</span>
<span class="n">SIGSYS</span><span class="w">       </span><span class="mi">31</span><span class="w">         </span><span class="cm">/* Bad system call.  */</span>
<span class="n">SIGUNUSED</span><span class="w">    </span><span class="mi">31</span>
</pre></div></div></div><div class="outline-2">
<h2 id="org-title-4"><span class="section-number-2">4.</span> RELRO等安全选项</h2><div class="outline-text-2" id="text-4"><p><a href="https://blog.csdn.net/tabactivity/article/details/126660974">来源</a> 编译时使用 <code>-z now</code> 选项</p></div></div><div class="outline-2">
<h2 id="org-title-5"><span class="section-number-2">5.</span> 判断字符是中文还是英文(有局限)</h2><div class="outline-text-2" id="text-5"><p><a href="https://blog.csdn.net/shen_chengfeng/article/details/109161829">来源</a></p><div class="org-src-container"><pre class="src src-c"><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;string.h&gt;</span>
<span class="w"> </span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="o">**</span><span class="w"> </span><span class="n">argv</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">	</span><span class="k">if</span><span class="p">(</span><span class="n">argc</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">		</span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Usage:</span><span class="se">\n</span><span class="s">./xxx str</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">		</span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">	</span><span class="p">}</span>
<span class="w">	</span>
<span class="w">	</span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
<span class="w">	</span><span class="kt">int</span><span class="w">   </span><span class="n">len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">strlen</span><span class="p">(</span><span class="n">p</span><span class="p">);</span>
<span class="w">	</span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">len</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">		</span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="o">*</span><span class="n">p</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="mh">0x80</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">			</span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;chinese: %x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">p</span><span class="p">);</span>
<span class="w">		</span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">			</span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;english: %x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">p</span><span class="p">);</span>
<span class="w">		</span><span class="p">}</span>
<span class="w">		</span><span class="n">p</span><span class="o">++</span><span class="p">;</span>
<span class="w">	</span><span class="p">}</span>
<span class="w">	</span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div><p>（以上代码可在my-test中找到）</p></div></div><div class="outline-2">
<h2 id="org-title-6"><span class="section-number-2">6.</span> 生成迷宫</h2><div class="outline-text-2" id="text-6"><p><a href="https://blog.csdn.net/jjwwwww/article/details/82872922">来源</a> - 该程序与下列代码有较大出入</p><div class="org-src-container"><pre class="src src-c"><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;unistd.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;time.h&gt;</span>

<span class="cp">#define SECOND 1000000</span>
<span class="cp">#define TPS    (SECOND / 20)</span>

<span class="c1">//地图长度L，包括迷宫主体20，外侧的包围的墙体2，</span>
<span class="c1">//最外侧包围路径2（之后会解释）</span>
<span class="cp">#define L (20 + 4)</span>

<span class="c1">//墙和路径的标识</span>
<span class="cp">#define WALL  0</span>
<span class="cp">#define ROUTE 1</span>
<span class="cp">#define MARK  2</span>
<span class="cp">#define WALL_C  &quot;国&quot;</span>
<span class="cp">#define ROUTE_C &quot;  &quot;</span>
<span class="cp">#define MARK_C  &quot;:;&quot;</span>

<span class="kt">int</span><span class="w"> </span><span class="o">**</span><span class="n">Maze</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>
<span class="k">static</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">Rank</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="c1">// 控制迷宫的复杂度，数值越大复杂度越低，最小值为0</span>
<span class="kt">int</span><span class="w"> </span><span class="n">level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">init</span><span class="p">();</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">print_map</span><span class="p">();</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">CreateMaze</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="o">**</span><span class="n">maze</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">y</span><span class="p">);</span><span class="w"> </span><span class="c1">//生成迷宫</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span><span class="w">				</span><span class="cm">/*{{{ */</span>
<span class="w">	</span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\033</span><span class="s">[?25l&quot;</span><span class="p">);</span>
<span class="w">	</span><span class="n">init</span><span class="p">();</span>
<span class="w">	</span><span class="n">print_map</span><span class="p">();</span>

<span class="w">	</span><span class="c1">//创造迷宫，（2，2）为起点</span>
<span class="w">	</span><span class="n">CreateMaze</span><span class="p">(</span><span class="n">Maze</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span>

<span class="w">	</span><span class="c1">//画迷宫的入口和出口</span>
<span class="w">	</span><span class="n">Maze</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ROUTE</span><span class="p">;</span>

<span class="w">	</span><span class="c1">//由于算法随机性，出口有一定概率不在（L-3,L-2）处，</span>
<span class="w">	</span><span class="c1">//此时需要寻找出口</span>
<span class="w">	</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">L</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">--</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">		</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Maze</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">L</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">ROUTE</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">			</span><span class="n">Maze</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">L</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ROUTE</span><span class="p">;</span>
<span class="w">			</span><span class="k">break</span><span class="p">;</span>
<span class="w">		</span><span class="p">}</span>
<span class="w">	</span><span class="p">}</span>

<span class="w">	</span><span class="n">print_map</span><span class="p">();</span>
<span class="w">	</span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\033</span><span class="s">[%dB&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">L</span><span class="p">);</span>

<span class="w">	</span><span class="kt">FILE</span><span class="w"> </span><span class="o">*</span><span class="n">fp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fopen</span><span class="p">(</span><span class="s">&quot;maze.txt&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;w&quot;</span><span class="p">);</span>
<span class="w">	</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">fp</span><span class="p">)</span><span class="w"> </span><span class="k">goto</span><span class="w"> </span><span class="n">LEAVE</span><span class="p">;</span>
<span class="w">	</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">L</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">		</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">L</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">			</span><span class="n">fprintf</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;%d &quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Maze</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]);</span>
<span class="w">		</span><span class="p">}</span>
<span class="w">		</span><span class="n">fprintf</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">	</span><span class="p">}</span>
<span class="w">	</span><span class="n">fclose</span><span class="p">(</span><span class="n">fp</span><span class="p">);</span>

<span class="nl">LEAVE</span><span class="p">:</span>
<span class="w">	</span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\033</span><span class="s">[?25h&quot;</span><span class="p">);</span>
<span class="w">	</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">L</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="w">		</span><span class="n">free</span><span class="p">(</span><span class="n">Maze</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
<span class="w">	</span><span class="n">free</span><span class="p">(</span><span class="n">Maze</span><span class="p">);</span>
<span class="w">	</span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span><span class="w">				</span><span class="cm">/*}}} */</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">init</span><span class="p">()</span>
<span class="p">{</span><span class="w">				</span><span class="cm">/*{{{ */</span>
<span class="w">	</span><span class="n">srand</span><span class="p">((</span><span class="kt">unsigned</span><span class="p">)</span><span class="n">time</span><span class="p">(</span><span class="nb">NULL</span><span class="p">));</span>

<span class="w">	</span><span class="n">Maze</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="o">**</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="n">L</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="p">));</span>
<span class="w">	</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">L</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">		</span><span class="n">Maze</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="n">calloc</span><span class="p">(</span><span class="n">L</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">));</span>
<span class="w">	</span><span class="p">}</span>

<span class="w">	</span><span class="c1">// 最外围层设为路径的原因，为了防止挖路时挖出边界，</span>
<span class="w">	</span><span class="c1">// 同时为了保护迷宫主体外的一圈墙体被挖穿</span>
<span class="w">	</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">L</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">		</span><span class="n">Maze</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ROUTE</span><span class="p">;</span>
<span class="w">		</span><span class="n">Maze</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ROUTE</span><span class="p">;</span>
<span class="w">		</span><span class="n">Maze</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">L</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ROUTE</span><span class="p">;</span>
<span class="w">		</span><span class="n">Maze</span><span class="p">[</span><span class="n">L</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">][</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ROUTE</span><span class="p">;</span>
<span class="w">	</span><span class="p">}</span>
<span class="w">	</span><span class="k">return</span><span class="p">;</span>
<span class="p">}</span><span class="w">				</span><span class="cm">/*}}} */</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">print_map</span><span class="p">()</span>
<span class="p">{</span><span class="w">				</span><span class="cm">/*{{{ */</span>
<span class="w">	</span><span class="kt">int</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">L</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="w">	</span><span class="kt">int</span><span class="w"> </span><span class="n">deep</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">L</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">L</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">Rank</span><span class="p">;</span><span class="w">    </span><span class="cm">/* 并无实际意义，经验公式 */</span>

<span class="w">	</span><span class="c1">//画迷宫</span>
<span class="w">	</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">L</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">		</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">L</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">			</span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%s&quot;</span><span class="p">,</span>
<span class="w">			       </span><span class="n">Maze</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">WALL</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="p">(</span><span class="n">Maze</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">MARK</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">MARK_C</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">ROUTE_C</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">WALL_C</span><span class="p">);</span>
<span class="w">		</span><span class="p">}</span>
<span class="w">		</span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">	</span><span class="p">}</span>
<span class="w">	</span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\033</span><span class="s">[%dA&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">l</span><span class="p">);</span>
<span class="w">	</span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\033</span><span class="s">[%dC  | 符号解释: &#39;%s&#39;为遍历节点</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">l</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">MARK_C</span><span class="p">);</span>
<span class="w">	</span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\033</span><span class="s">[%dC  |           &#39;%s&#39;为走道</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">l</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">ROUTE_C</span><span class="p">);</span>
<span class="w">	</span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\033</span><span class="s">[%dC  |           &#39;%s&#39;为边墙</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">l</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">WALL_C</span><span class="p">);</span>
<span class="w">	</span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\033</span><span class="s">[%dC  | 全图边长: %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">l</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">L</span><span class="p">);</span>
<span class="w">	</span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\033</span><span class="s">[%dC  | 实体边长: %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">l</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">l</span><span class="p">);</span>
<span class="w">	</span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\033</span><span class="s">[%dC  | 本体边长: %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">l</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span>
<span class="w">	</span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\033</span><span class="s">[%dC  | 复杂程度: %d (值越小越复杂) </span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">l</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">Rank</span><span class="p">);</span>
<span class="w">	</span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\033</span><span class="s">[%dC  | 延迟时间: %.4fs</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">l</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">double</span><span class="p">)(</span><span class="kt">int</span><span class="p">)</span><span class="n">TPS</span><span class="o">/</span><span class="n">SECOND</span><span class="p">);</span>
<span class="w">	</span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\033</span><span class="s">[%dC  | 遍历深度: %-3d [%4.1f%%]</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">l</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">level</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">double</span><span class="p">)</span><span class="n">level</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">deep</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">100</span><span class="p">);</span>
<span class="w">	</span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\033</span><span class="s">[1A</span><span class="se">\033</span><span class="s">[%dC [&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">l</span><span class="o">*</span><span class="mi">2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">25</span><span class="p">);</span>
<span class="w">	</span><span class="kt">int</span><span class="w"> </span><span class="n">lim</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">80</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="n">l</span><span class="o">*</span><span class="mi">2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">28</span><span class="p">);</span>
<span class="w">	</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">lim</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">		</span><span class="n">printf</span><span class="p">((</span><span class="kt">double</span><span class="p">)</span><span class="n">i</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">lim</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="p">(</span><span class="kt">double</span><span class="p">)</span><span class="n">level</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">deep</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s">&quot;#&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">&quot; &quot;</span><span class="p">);</span>
<span class="w">	</span><span class="p">}</span>
<span class="w">	</span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;]</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">	</span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\033</span><span class="s">[%dA&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">9</span><span class="p">);</span>
<span class="w">	</span><span class="k">return</span><span class="p">;</span>
<span class="p">}</span><span class="w">				</span><span class="cm">/*}}} */</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">CreateMaze</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="o">**</span><span class="n">maze</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">y</span><span class="p">)</span>
<span class="p">{</span><span class="w">				</span><span class="cm">/*{{{ */</span>
<span class="w">	</span><span class="n">level</span><span class="o">++</span><span class="p">;</span>
<span class="w">	</span><span class="n">maze</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">maze</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">WALL</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">ROUTE</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">maze</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">];</span>

<span class="w">	</span><span class="c1">//确保四个方向随机</span>
<span class="w">	</span><span class="kt">int</span><span class="w"> </span><span class="n">direction</span><span class="p">[</span><span class="mi">4</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="mi">-1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">-1</span><span class="p">}</span><span class="w"> </span><span class="p">};</span>
<span class="w">	</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">		</span><span class="cm">/* Swap data */</span>
<span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rand</span><span class="p">()</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
<span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">temp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">direction</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">];</span>
<span class="w">		</span><span class="n">direction</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">direction</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="mi">0</span><span class="p">];</span>
<span class="w">		</span><span class="n">direction</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">temp</span><span class="p">;</span>

<span class="w">		</span><span class="n">temp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">direction</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">];</span>
<span class="w">		</span><span class="n">direction</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">direction</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="mi">1</span><span class="p">];</span>
<span class="w">		</span><span class="n">direction</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">temp</span><span class="p">;</span>
<span class="w">	</span><span class="p">}</span>

<span class="w">	</span><span class="c1">//向四个方向开挖</span>
<span class="w">	</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">dx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="p">;</span>
<span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">dy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">y</span><span class="p">;</span>

<span class="w">		</span><span class="c1">//控制挖的距离，由Rank来调整大小</span>
<span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">range</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">Rank</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">rand</span><span class="p">()</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">Rank</span><span class="p">);</span>
<span class="w">		</span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">range</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">			</span><span class="n">dx</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">direction</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">];</span>
<span class="w">			</span><span class="n">dy</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">direction</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">];</span>

<span class="w">			</span><span class="c1">//排除掉回头路</span>
<span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">maze</span><span class="p">[</span><span class="n">dx</span><span class="p">][</span><span class="n">dy</span><span class="p">]</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">WALL</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">				</span><span class="k">break</span><span class="p">;</span>
<span class="w">			</span><span class="p">}</span>
<span class="w">			</span><span class="c1">//判断是否挖穿路径</span>
<span class="w">			</span><span class="kt">int</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">			</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dx</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">dx</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">				</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dy</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">dy</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"> </span><span class="n">k</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">					</span><span class="c1">// abs(j - dx) + abs(k - dy) == 1 </span>
<span class="w">					</span><span class="c1">// 确保只判断九宫格的四个特定位置</span>
<span class="w">					</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">abs</span><span class="p">(</span><span class="n">j</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">dx</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">abs</span><span class="p">(</span><span class="n">k</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">dy</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span>
<span class="w">					    </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">maze</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="n">k</span><span class="p">]</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">WALL</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">						</span><span class="n">count</span><span class="o">++</span><span class="p">;</span>
<span class="w">					</span><span class="p">}</span>
<span class="w">				</span><span class="p">}</span>
<span class="w">			</span><span class="p">}</span>

<span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">count</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">				</span><span class="k">break</span><span class="p">;</span>
<span class="w">			</span><span class="p">}</span>
<span class="w">			</span><span class="c1">//确保不会挖穿时，前进</span>
<span class="w">			</span><span class="o">--</span><span class="n">range</span><span class="p">;</span>
<span class="w">			</span><span class="n">maze</span><span class="p">[</span><span class="n">dx</span><span class="p">][</span><span class="n">dy</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ROUTE</span><span class="p">;</span>
<span class="w">			</span><span class="n">print_map</span><span class="p">();</span>
<span class="w">			</span><span class="n">usleep</span><span class="p">(</span><span class="n">TPS</span><span class="p">);</span>
<span class="w">		</span><span class="p">}</span>

<span class="w">		</span><span class="c1">//没有挖穿危险，以此为节点递归</span>
<span class="w">		</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">range</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">			</span><span class="n">maze</span><span class="p">[</span><span class="n">dx</span><span class="p">][</span><span class="n">dy</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MARK</span><span class="p">;</span>
<span class="w">			</span><span class="n">CreateMaze</span><span class="p">(</span><span class="n">maze</span><span class="p">,</span><span class="w"> </span><span class="n">dx</span><span class="p">,</span><span class="w"> </span><span class="n">dy</span><span class="p">);</span>
<span class="w">			</span><span class="n">maze</span><span class="p">[</span><span class="n">dx</span><span class="p">][</span><span class="n">dy</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ROUTE</span><span class="p">;</span>
<span class="w">		</span><span class="p">}</span>
<span class="w">	</span><span class="p">}</span>
<span class="w">	</span><span class="n">level</span><span class="o">--</span><span class="p">;</span>
<span class="w">	</span><span class="k">return</span><span class="p">;</span>
<span class="p">}</span><span class="w">				</span><span class="cm">/*}}} */</span>
</pre></div><p>（以上代码可在my-test中找到）</p></div></div></div>
<div id="postamble" class="status"><p class="date">时间: <2025-04-19 六></p>
<p class="author">作者: 不要在意我的头像QwQ</p>
<p class="description">描述: 抄别人blog的东西，塞一起应该方便自己查吧？</p>
<p class="date">生成于: 2025-08-02 日 10:57:20</p>
</div>
</body>
</html>